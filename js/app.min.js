$(document).ready(function(){function e(e){e.preventDefault();var t=$(this);var n=t.data("method");var r=t.data("controller");if(r==undefined){var r="sms"}var i="http://www.patrickneary.co/api/?controller="+r;var s=t.serialize();var o=$(this).find("input[type=submit]");var u=o.val();var a=sessionStorage.getItem("token");var f=sessionStorage.getItem("sessionId");if(a!==undefined&&f!==undefined){s=s+"&token="+a+"&sessionId="+f}o.attr("disabled",true).val("Loading...");$.ajax({url:i,type:n,data:s}).done(function(e){var t=$.parseJSON(e);var n=$(".alert");if(t.token!=undefined&&t.sessionId!=undefined){sessionStorage.setItem("token",t.token);sessionStorage.setItem("sessionId",t.sessionId)}if(t.messages!=undefined){var r=$(".output");r.html(t.messages).removeClass("hidden")}n.html(t.message).removeClass("alert-success").removeClass("alert-danger").addClass("alert-"+t.type).removeClass("hidden");o.attr("disabled",false).val(u)})}function t(e){e.preventDefault();var t=$(".alert");var n=$(".output");if(n!=undefined){n.html("")}sessionStorage.clear();t.html("You are now logged out.").removeClass("alert-danger").addClass("alert-success").removeClass("hidden")}$(document).on("submit","[data-rest-form]",e);$(document).on("click","a.logout",t)})